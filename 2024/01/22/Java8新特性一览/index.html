<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>Java8新特性一览 | 小奥</title><meta name="keywords" content="JDK8"><meta name="author" content="小奥,3189137314@qq.com"><meta name="copyright" content="小奥"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="Java8新特性一览"><meta name="application-name" content="Java8新特性一览"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="Java8新特性一览"><meta property="og:url" content="http://example.com/2024/01/22/Java8%E6%96%B0%E7%89%B9%E6%80%A7%E4%B8%80%E8%A7%88/index.html"><meta property="og:site_name" content="小奥"><meta property="og:description" content="JDK81、接口Java8对接口做了进一步的增强。  在接口中添加使用default关键字修饰的非抽象方法，即：默认方法。 接口中可以声明静态方法，并且可以实现 。  默认方法和静态方法： Java8 允许我们通过default关键字对接口中定义的抽象方法提供一个默认的实现。 public inte"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="http://example.com/img/png/19.png"><meta property="article:author" content="小奥"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="http://example.com/img/png/19.png"><meta name="description" content="JDK81、接口Java8对接口做了进一步的增强。  在接口中添加使用default关键字修饰的非抽象方法，即：默认方法。 接口中可以声明静态方法，并且可以实现 。  默认方法和静态方法： Java8 允许我们通过default关键字对接口中定义的抽象方法提供一个默认的实现。 public inte"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="http://example.com/2024/01/22/Java8%E6%96%B0%E7%89%B9%E6%80%A7%E4%B8%80%E8%A7%88/"><link rel="preconnect" href="//cdn.cbd.int"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: {"enable":true,"img":"https://upload-bbs.miyoushe.com/upload/2023/09/03/125766904/ee23df8517f3c3e3efc4145658269c06_5714860933110284659.png"},
  postHeadAiDescription: undefined,
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 不要走！再看看嘛！","backTitle":"♪(^∇^*)欢迎肥来！"},
  LA51: undefined,
  greetingBox: {"enable":true,"default":"晚上好👋","list":[{"greeting":"晚安😴","startTime":0,"endTime":5},{"greeting":"早上好鸭👋, 祝你一天好心情！","startTime":6,"endTime":9},{"greeting":"上午好👋, 状态很好，鼓励一下～","startTime":10,"endTime":10},{"greeting":"11点多啦, 在坚持一下就吃饭啦～","startTime":11,"endTime":11},{"greeting":"午安👋, 宝贝","startTime":12,"endTime":14},{"greeting":"🌈充实的一天辛苦啦！","startTime":14,"endTime":18},{"greeting":"19点喽, 奖励一顿丰盛的大餐吧🍔。","startTime":19,"endTime":19},{"greeting":"晚上好👋, 在属于自己的时间好好放松😌~","startTime":20,"endTime":24}]},
  twikooEnvId: '',
  commentBarrageConfig:undefined,
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: undefined,
  authorStatus: {"skills":["🤖️ 编程知识爱好者","🔍 分享与热心帮助","🏠 面试总结小能手","🔨 设计开发一条龙","🤝 源码阅读与解析","🏃 脚踏实地行动派","🧱 团队小组发动机","💢 壮汉人狠话不多"]},
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: 小奥","link":"链接: ","source":"来源: 小奥","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: '小奥',
  title: 'Java8新特性一览',
  postAI: '',
  pageFillDescription: 'JDK8, 1、接口, 2、Lambda表达式, 3、函数式接口, 4、引用, (1) 方法引用, (2) 构造器引用, (3) 数组引用, 5、Stream API, (1) 什么是Stream, (2) 创建, (3) 筛选x2F 切片, (4) 映射, (5) 排序, (6) 查找 x2F 匹配, (7) 归约 x2F 收集, (8) 并行流, 6、Optional, 7、新时间日期API, (1) 安全问题, (2) 本地时间 x2F 日期, (3) 时间戳, (4) 时间x2F日期差, (5) 时间校正器, (6) 时间格式化, (7) 时区, 8、Annotations注解, (1) 类型注解, (2) 重复注解接口对接口做了进一步的增强在接口中添加使用关键字修饰的非抽象方法即默认方法接口中可以声明静态方法并且可以实现默认方法和静态方法允许我们通过关键字对接口中定义的抽象方法提供一个默认的实现一个普通的方法一个默认的方法执行接口的方法一个静态方法执行接口的方法在上面这个接口中我们除了定义了一个抽象方法还定义了一个带有默认实现的方法我们在实现这个接口时可以只需要实现方法默认方法可以直接调用即可也就是说我们可以不必强制实现方法通过关键字的特性我们可以很方便的对之前的接口进行扩展而此接口的实现类不必做出任何改动接口默认方法的类优先原则若一个接口中定义了一个默认方法而另外一个父类或者接口中又定义了一个同名的方法时选择父类中的方法如果一个父类提供了具体的实现那么接口中具有相同名称和参数的默认方法会被忽略接口冲突如果一个父接口提供一个默认方法而另一个接口也提供了一个具有相同名称和参数列表的方法不管方法是否是默认方法那么必须覆盖该方法来解决冲突表达式是一个匿名函数没有函数名的函数直接对应于其中的抽象表达式可以表示闭包可以理解为一段可以传递的代码将代码像数据一样传递可以写出更简洁更灵活的代码作为一种更紧凑的代码风格是语言表达能力得到提升表达式允许把函数作为一个方法的参数基本表达如下或无参数无返回值例如接口之前表达式写法有一个参数无返回值小括号可以省略不写有两个及以上的参数有返回值比较方法体内部只有一条语句的时候大括号可以省略函数式接口表达式是用过函数式接口只有一个方法的普通接口来实现的函数式接口可以被隐式转换为表达式为了与普通的接口区分开新增加了一种特殊的注解如下四大核心函数式接口函数式接口参数类型返回类型用途消费型接口对类型为的对象应用操作提供型接口无返回类型为的对象函数型接口对类型为的对象应用操作并返回结果为类型的对象断言型接口确定类型为的对象是否满足某约束并返回值消费型接口消费型接口提供型接口函数型接口断言型接口退休继续加油引用方法引用若表达式中的内容已经有方法实现则我们可以使用方法引用语法格式对象实例方法类静态方法类实例方法注意表达实体中调用的方法参数列表返回类型必须和函数式接口中抽象方法保持一致对象实例方法类静态方法类实例方法构造器引用格式数组引用什么是流是数据渠道是用于操作数据源集合数组等所生成的元素序列简单来说就是我们对一个包含一个或者多个元素的集合做各种操作注意不会存储元素不会改变源对象会返回一个持有结果的新的的操作是延迟执行的需要返回结果的时候才会执行的操作过程如下创建一个数据源如数组集合获取一个流中间操作一个中间操作链对数据源的数据进行处理终止操作终端操作一个终止操作执行中间操作链并产生结果创建创建流的几种方式如下通过集合获取流通过数组获取流通过的静态方法获取通过迭代获取流生成流筛选切片中间操作接收从流中排除元素截断流使其元素不超过给定数量跳过元素返回一个舍弃前个元素的流若流中元素不足个则返回一个空流筛选通过流生成的和去除重复元素条件过滤限制条数去除重复跳过指定的条数循环打印多个中间操作可以连接起来形成一个流水线除非流水线上的操作触发终止操作否则中间操作不会执行任何的处理而在终止操作时一次性全部处理称为惰性求值映射接收将元素转换为其他形式或者提取信息接受一个函数作为参数该函数会被应用到每个元素上并将其映射成一个新的元素接收一个函数作为参数将流中每一个值都转换成另一个流然后把所有流重新连接成一个流排序自然排序自定义排序查找匹配终止操作检查是否匹配所有元素检查是否至少匹配一个元素检查是否没有匹配所有元素返回第一个元素返回当前流中的任意元素返回流中元素的总个数返回流中的最大值返回流中的最小值匹配所有元素至少匹配一个元素所有元素都不匹配返回第一个元素避免空指针异常如果为空则找一个替换的对象返回任意一个元素返回流中元素的总个数归约收集归约可以将流中的数据反复结合起来得到一个值收集将流转换成其他形式接收一个接口实现用于给流中元素做汇总的方法放入放入放入总数平均值总和最大值最小值分组多级分组符合条件不符合条件分区总结连接并行流并行流就是把一个内容分成几个数据块并用不同的线程分别处理每个数据块的流中将并行流进行了优化我们可以很容易的对数据进行操作可以声明性地通过与在并行流与串行流之间切换串行流单线程切换为并行流并行流多线程切换为串行流底层使用的是框架类是一个容器类代表一个值存在或者不存在原来使用表示一个值不存在现在可以用可以更好的表达这个概念并且可以避免空指针异常常用方法创建一个实例创建一个空的实例若不为则创建实例否则空实例判断是否包含某值如果调用对象包含值返回该值否则返回如果调用对象包含值返回该值否则返回获取的值如果有值对其处理并返回处理后的否则返回与相似要求返回值必须是新时间日期安全问题之前的时间类存在很多的缺点最开始的时候既要承载日期信息又要做日期之间的转换还要做不同日期格式的显示职责较繁杂从开始这三项职责分开了使用类实现日期和时间字段之间转换使用类来格式化和分析日期字符串而只用来承载日期和时间信息对和的表达输出观察输出结果是而是如果要设置日期我们应该使用如下输出输出不过这样的表示还是从开始的除非我们直接使用枚举类型表示月份和中的所有属性都是可变的是非线程安全的基于上述问题在对日期进行了优化首先是将日期和时间设计为不可变类型就像类型一样这样就避免了多线程下对日期的修改导致的线程安全问题每次对日期的操作都会生成一个新的日期对象另外还把功能进一步细化了对日期的运算更加便利输出也更加人性化本地时间日期类的实例是不可变的对象分别表示使用日历系统的日期时间日期和时间它们提供了简单的日期或时间并不包含当前的时间信息也不包含与时区相关的信息常用方法方法名返回值类型解释从默认时区的系统时钟获取当前日期从年月日时分秒获得的实例将纳秒设置为零返回此日期时间的副本并添加指定的数量从此日期时间获取指定字段的值为获取当前时间获取指定时间加减获取指定给的年月日时分秒时间戳时间戳是以元年到某个时间之间的毫秒数默认获取时区世界协调时间带偏移量的时间日期如转换成对应的毫秒值构建时间戳时间日期差计算两个时间之间的间隔计算两个日期之间的间隔秒时间戳年月时间校正器时间校正器有时我们可能需要获取例如将日期调整到下个周日等操作该类通过静态方法提供了大量的常用的实现例如获取下个周日一些时间校正器的使用如下指定日期时间中的年月日指定时间校正器自定义时间矫正器其他时间逻辑时间格式化格式化日期或时间默认格式化自定义格式化解析时区查看支持的时区指定时区在已构建好的日期时间上指定时区注解在中对注解的改进主要有两点类型注解和重复注解类型注解新增和在上新增的两个注释的程序元素类型和用来描述注解的新场合表示该注解能写在类型变量的声明语句中表示该注解能写在使用类型的任何语句中声明语句泛型和强制转换语句中的类型类型注解的作用类型注解被用来支持在的程序中做强类型检查配合第三方插件工具注此插件这里不介绍了可以在编译的时候检测出异常等都是以提高代码质量这就是类型注解的作用使用可以找到类型注解出现的地方并检查编译上面的类上面编译是通过的但若修改代码但若不想使用类型注解检测出来错误则不需要正常是可以通过编译的但是运行时会报异常为了能在编译期间就自动检查出这类异常可以通过类型注解结合提前排查出来错误异常注意版本是不支持注解但有个向下兼容的解决方案就是将类型注解用注释起来这样编译器就会忽略掉注释块但用里面的编译器同样能够检测出错误通过类型注解可以在编译时就找到重复注解允许在同一声明类型类属性或方法上多次使用同一个注解以前的版本使用注解有一个限制是相同的注解在同一位置只能使用一次不能使用多次引入了重复注解机制这样相同的注解可以在同一地方使用多次重复注解机制本身必须用注解实际上重复注解不是一个语言上的改变只是编译器层面的改动技术层面仍然是一样的定义一个注解类型参数定义一个注解容器使用',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-01-22 22:00:29',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.0.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="https://npm.elemecdn.com/anzhiyu-blog-static@1.0.4/img/avatar.jpg"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://xiaoaozz.github.io/" title="个人博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="个人博客"/><span class="back-menu-item-text">个人博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://github.com/xiaoaozz" title="Github"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://avatars.githubusercontent.com/u/104616274?v=4" alt="Github"/><span class="back-menu-item-text">Github</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">小奥</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a><div id="he-plugin-simple"></div><script>var WIDGET = {
  "CONFIG": {
    "modules": "0124",
    "background": "2",
    "tmpColor": "FFFFFF",
    "tmpSize": "16",
    "cityColor": "FFFFFF",
    "citySize": "16",
    "aqiColor": "E8D87B",
    "aqiSize": "16",
    "weatherIconSize": "24",
    "alertIconSize": "18",
    "padding": "10px 10px 10px 10px",
    "shadow": "0",
    "language": "auto",
    "borderRadius": "20",
    "fixed": "true",
    "vertical": "top",
    "horizontal": "left",
    "left": "20",
    "top": "7.1",
    "key": "df245676fb434a0691ead1c63341cd94"
  }
}
</script><link rel="stylesheet" href="https://widget.qweather.net/simple/static/css/he-simple.css?v=1.4.0"/><script src="https://widget.qweather.net/simple/static/js/he-simple.js?v=1.4.0"></script></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="/null" target="_blank"><img class="post-qr-code-img" alt="微信" src="/null"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/null" target="_blank"><img class="post-qr-code-img" alt="支付宝" src="/null"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/AQS/" style="font-size: 1.05rem;">AQS<sup>1</sup></a><a href="/tags/ArrayList/" style="font-size: 1.05rem;">ArrayList<sup>1</sup></a><a href="/tags/BigDecimal/" style="font-size: 1.05rem;">BigDecimal<sup>1</sup></a><a href="/tags/Feed%E6%B5%81/" style="font-size: 1.05rem;">Feed流<sup>1</sup></a><a href="/tags/Full-GC/" style="font-size: 1.05rem;">Full GC<sup>1</sup></a><a href="/tags/Go%E9%9D%A2%E7%BB%8F/" style="font-size: 1.05rem;">Go面经<sup>1</sup></a><a href="/tags/HashMap/" style="font-size: 1.05rem;">HashMap<sup>1</sup></a><a href="/tags/JDK8/" style="font-size: 1.05rem;">JDK8<sup>1</sup></a><a href="/tags/Java%E9%9D%A2%E7%BB%8F/" style="font-size: 1.05rem;">Java面经<sup>1</sup></a><a href="/tags/LinkedList/" style="font-size: 1.05rem;">LinkedList<sup>1</sup></a><a href="/tags/MySQL%E4%BC%98%E5%8C%96/" style="font-size: 1.05rem;">MySQL优化<sup>2</sup></a><a href="/tags/MySQL%E5%BA%94%E7%94%A8/" style="font-size: 1.05rem;">MySQL应用<sup>1</sup></a><a href="/tags/MySQL%E9%9D%A2%E7%BB%8F/" style="font-size: 1.05rem;">MySQL面经<sup>1</sup></a><a href="/tags/OOM/" style="font-size: 1.05rem;">OOM<sup>1</sup></a><a href="/tags/RabbitMQ/" style="font-size: 1.05rem;">RabbitMQ<sup>1</sup></a><a href="/tags/Redission%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81/" style="font-size: 1.05rem;">Redission分布式锁<sup>1</sup></a><a href="/tags/Redis%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81/" style="font-size: 1.05rem;">Redis分布式锁<sup>1</sup></a><a href="/tags/ReentrantLock/" style="font-size: 1.05rem;">ReentrantLock<sup>1</sup></a><a href="/tags/SQL%E4%BC%98%E5%8C%96/" style="font-size: 1.05rem;">SQL优化<sup>2</sup></a><a href="/tags/Servlet/" style="font-size: 1.05rem;">Servlet<sup>1</sup></a><a href="/tags/Socket/" style="font-size: 1.05rem;">Socket<sup>2</sup></a><a href="/tags/SpringCloud/" style="font-size: 1.05rem;">SpringCloud<sup>1</sup></a><a href="/tags/StopWatch/" style="font-size: 1.05rem;">StopWatch<sup>1</sup></a><a href="/tags/synchronized/" style="font-size: 1.05rem;">synchronized<sup>1</sup></a><a href="/tags/%E4%BA%8B%E5%8A%A1/" style="font-size: 1.05rem;">事务<sup>3</sup></a><a href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/" style="font-size: 1.05rem;">分布式事务<sup>1</sup></a><a href="/tags/%E5%B9%B6%E5%8F%91/" style="font-size: 1.05rem;">并发<sup>2</sup></a><a href="/tags/%E6%8E%A5%E5%8F%A3%E9%99%90%E6%B5%81/" style="font-size: 1.05rem;">接口限流<sup>1</sup></a><a href="/tags/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/" style="font-size: 1.05rem;">文件上传<sup>1</sup></a><a href="/tags/%E6%AD%BB%E9%94%81/" style="font-size: 1.05rem;">死锁<sup>1</sup></a><a href="/tags/%E7%AE%97%E6%B3%95%E6%A8%A1%E6%9D%BF/" style="font-size: 1.05rem;">算法模板<sup>1</sup></a><a href="/tags/%E7%BA%BF%E7%A8%8B/" style="font-size: 1.05rem;">线程<sup>1</sup></a><a href="/tags/%E7%BA%BF%E7%A8%8B%E6%B1%A0/" style="font-size: 1.05rem;">线程池<sup>1</sup></a><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E9%9D%A2%E7%BB%8F/" style="font-size: 1.05rem;">计算机网络面经<sup>1</sup></a><a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size: 1.05rem;">设计模式<sup>1</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/03/"><span class="card-archive-list-date">三月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">4</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/02/"><span class="card-archive-list-date">二月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">6</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/01/"><span class="card-archive-list-date">一月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">24</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/12/"><span class="card-archive-list-date">十二月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">5</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/02/"><span class="card-archive-list-date">二月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/Java/" itemprop="url">Java</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/JDK8/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>JDK8</span></a></span></div></div><h1 class="post-title" itemprop="name headline">Java8新特性一览</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2024-01-22T13:50:07.000Z" title="发表于 2024-01-22 21:50:07">2024-01-22</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2024-01-22T14:00:29.051Z" title="更新于 2024-01-22 22:00:29">2024-01-22</time></span></div><div class="meta-secondline"><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为河南"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>河南</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="/img/png/19.png"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="http://example.com/2024/01/22/Java8%E6%96%B0%E7%89%B9%E6%80%A7%E4%B8%80%E8%A7%88/"><header><a class="post-meta-categories" href="/categories/Java/" itemprop="url">Java</a><a href="/tags/JDK8/" tabindex="-1" itemprop="url">JDK8</a><h1 id="CrawlerTitle" itemprop="name headline">Java8新特性一览</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">小奥</span><time itemprop="dateCreated datePublished" datetime="2024-01-22T13:50:07.000Z" title="发表于 2024-01-22 21:50:07">2024-01-22</time><time itemprop="dateCreated datePublished" datetime="2024-01-22T14:00:29.051Z" title="更新于 2024-01-22 22:00:29">2024-01-22</time></header><h1 id="JDK8"><a href="#JDK8" class="headerlink" title="JDK8"></a>JDK8</h1><h2 id="1、接口"><a href="#1、接口" class="headerlink" title="1、接口"></a>1、接口</h2><p>Java8对接口做了进一步的增强。</p>
<ul>
<li>在接口中添加使用default关键字修饰的非抽象方法，即：默认方法。</li>
<li>接口中可以声明静态方法，并且可以实现 。</li>
</ul>
<p>默认方法和静态方法：</p>
<p>Java8 允许我们通过<code>default</code>关键字对接口中定义的抽象方法提供一个默认的实现。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">MyInterface</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 一个普通的方法</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">method</span><span class="params">(<span class="type">int</span> <span class="keyword">var</span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 一个默认的方法</span></span><br><span class="line">    <span class="keyword">default</span> <span class="keyword">void</span> <span class="title function_">defaultMethod</span><span class="params">(<span class="type">int</span> <span class="keyword">var</span>)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;执行接口的 default 方法&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">     <span class="comment">// 一个静态方法</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">staticMethod</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;执行接口的 static 方法&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在上面这个接口中，我们除了定义了一个抽象方法 <code>calculate</code>，还定义了一个带有默认实现的方法 <code>sqrt</code>。 我们在实现这个接口时，可以只需要实现 <code>calculate</code> 方法，默认方法 <code>sqrt</code> 可以直接调用即可，也就是说我们可以不必强制实现 <code>sqrt</code> 方法。</p>
<p>通过default关键字的特性，我们可以很方便的对之前的接口进行扩展，而此接口的实现类不必做出任何改动。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">       <span class="type">MyInterface</span> <span class="variable">anInterface</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyInterface</span>() &#123;</span><br><span class="line">           <span class="meta">@Override</span></span><br><span class="line">           <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">(<span class="type">int</span> a)</span> &#123;</span><br><span class="line">               System.out.println(<span class="string">&quot;&quot;</span>);</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;;</span><br><span class="line">       anInterface.method(<span class="number">0</span>);</span><br><span class="line">       anInterface.defaultMethod(<span class="number">1</span>);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p>接口默认方法的类优先原则：</p>
<p>若一个接口中定义了一个默认方法，而另外一个父类或者接口中又定义了一个同名的方法时：</p>
<ul>
<li><strong>选择父类中的方法。</strong>如果一个父类提供了具体的实现，那么接口中具有相同名称和参数的默认方法会被忽略。</li>
<li><strong>接口冲突。</strong>如果一个父接口提供一个默认方法，而另一个接口也提供了一个具有相同名称和参数列表的方法（不管方法是否是默认方法），那么必须覆盖该方法来解决冲突。</li>
</ul>
<h2 id="2、Lambda表达式"><a href="#2、Lambda表达式" class="headerlink" title="2、Lambda表达式"></a>2、Lambda表达式</h2><p> Lambda是一个匿名函数（没有函数名的函数），直接对应于其中的Lambda抽象，Lambda 表达式可以表示闭包。</p>
<p>可以理解为一段可以传递的代码（将代码像数据一样传递），可以写出更简洁、更灵活的代码；作为一种更紧凑的代码风格，是Java语言表达能力得到提升。</p>
<p>Lambda表达式允许把函数作为一个方法的参数，基本表达如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">(parameters) -&gt; expression 或 (parameters) -&gt; &#123;statements;&#125;</span><br></pre></td></tr></table></figure>

<p>（1）无参数，无返回值</p>
<p>例如，Runnable接口：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Runnable</span> <span class="variable">r1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line">          <span class="meta">@Override</span></span><br><span class="line">          <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">              System.out.println(<span class="string">&quot;java8之前&quot;</span>);</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;;</span><br><span class="line">      <span class="type">Runnable</span> <span class="variable">r2</span> <span class="operator">=</span> () -&gt; &#123;</span><br><span class="line">          System.out.println(<span class="string">&quot;Lambda表达式写法&quot;</span>);</span><br><span class="line">      &#125;;</span><br></pre></td></tr></table></figure>

<p>（2）有一个参数，无返回值</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Consumer&lt;String&gt; con1 = (a) -&gt; System.out.println(a);</span><br><span class="line">      con1.accept(<span class="string">&quot;lambda&quot;</span>);</span><br><span class="line"><span class="comment">// 小括号可以省略不写</span></span><br><span class="line">Consumer&lt;String&gt; con1 = a -&gt; System.out.println(a);</span><br><span class="line">      con1.accept(<span class="string">&quot;lambda&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>（3）有两个及以上的参数，有返回值</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Comparator&lt;Integer&gt; com1 = (a, b) -&gt; &#123;</span><br><span class="line">          System.out.println(<span class="string">&quot;lambda 比较&quot;</span>);</span><br><span class="line">          <span class="keyword">return</span> Integer.compare(a, b);</span><br><span class="line">      &#125;;</span><br><span class="line"><span class="comment">// 方法体内部只有一条语句的时候，大括号可以省略</span></span><br><span class="line">      Comparator&lt;Integer&gt; com2 = (a, b) -&gt; Integer.compare(a, b);</span><br></pre></td></tr></table></figure>

<h2 id="3、函数式接口"><a href="#3、函数式接口" class="headerlink" title="3、函数式接口"></a>3、函数式接口</h2><p><strong>Lambda表达式是用过函数式接口（只有一个方法的普通接口）来实现的，函数式接口可以被隐式转换为Lambda表达式，为了与普通的接口区分开，JDK1.8新增加了一种特殊的注解@FunctionalInterface 如下：</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@FunctionalInterface</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Function</span>&lt;T, R&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Applies this function to the given argument.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> t the function argument</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> the function result</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    R <span class="title function_">apply</span><span class="params">(T t)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>（1）四大核心函数式接口</p>
<table>
<thead>
<tr>
<th align="center">函数式接口</th>
<th align="center">参数类型</th>
<th align="center">返回类型</th>
<th align="center">用途</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Consumer消费型接口</td>
<td align="center">T</td>
<td align="center">void</td>
<td align="center">对类型为T的对象应用操作：viod accept(T t)</td>
</tr>
<tr>
<td align="center">Supplier提供型接口</td>
<td align="center">无</td>
<td align="center">T</td>
<td align="center">返回类型为T的对象：T get()</td>
</tr>
<tr>
<td align="center">Function&lt;T, R&gt;函数型接口</td>
<td align="center">T</td>
<td align="center">R</td>
<td align="center">对类型为T的对象应用操作，并返回结果为R类型的对象：R apply(T t)</td>
</tr>
<tr>
<td align="center">Predicate断言型接口</td>
<td align="center">T</td>
<td align="center">boolean</td>
<td align="center">确定类型为T的对象是否满足某约束，并返回boolean值：boolean test(T t)</td>
</tr>
</tbody></table>
<p>（2）Consumer消费型接口</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Consumer&lt;Integer&gt; consumer = x -&gt; System.out.println(<span class="string">&quot;消费型接口&quot;</span> + x);</span><br><span class="line">      consumer.accept(<span class="number">1</span>);</span><br></pre></td></tr></table></figure>

<p>（3）Supplier提供型接口</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Supplier&lt;Integer&gt; supplier = () -&gt; (<span class="type">int</span>)(Math.random() * <span class="number">10</span>);</span><br><span class="line">System.out.println(supplier.get());</span><br></pre></td></tr></table></figure>

<p>（4）Function函数型接口</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;123xyz&quot;</span>;</span><br><span class="line">Function&lt;String, String&gt; function = s -&gt; s.substring(<span class="number">1</span>, <span class="number">5</span>);</span><br><span class="line">System.out.println(function.apply(str));</span><br></pre></td></tr></table></figure>

<p>（5）Predicate断言型接口</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Integer</span> <span class="variable">age</span> <span class="operator">=</span> <span class="number">30</span>;</span><br><span class="line">Predicate&lt;Integer&gt; predicate = i -&gt; i &gt;= <span class="number">35</span>;</span><br><span class="line"><span class="keyword">if</span> (predicate.test(age)) &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;退休&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;继续加油&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4、引用"><a href="#4、引用" class="headerlink" title="4、引用"></a>4、引用</h2><h3 id="1-方法引用"><a href="#1-方法引用" class="headerlink" title="(1) 方法引用"></a>(1) 方法引用</h3><p>若Lambda表达式中的内容已经有方法实现，则我们可以使用方法引用。</p>
<p>语法格式：</p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line">对象::实例方法</span><br><span class="line">类::静态方法</span><br><span class="line">类::实例方法</span><br></pre></td></tr></table></figure>

<p>注意：Lambda表达实体中调用的方法参数列表，返回类型必须和函数式接口中抽象方法保持一致。</p>
<p>① 对象::实例方法</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Consumer&lt;String&gt; con1 = s -&gt; System.out.println(s);</span><br><span class="line">      con1.accept(<span class="string">&quot;123&quot;</span>);</span><br><span class="line"></span><br><span class="line">      Consumer&lt;String&gt; con2 = System.out::println;</span><br><span class="line">      con2.accept(<span class="string">&quot;456&quot;</span>);</span><br></pre></td></tr></table></figure>

<p> ② 类::静态方法</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Comparator&lt;Integer&gt; com1 = (x, y) -&gt; Integer.compare(x, y);</span><br><span class="line">      com1.compare(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">      Comparator&lt;Integer&gt; com2 = Integer::compare;</span><br><span class="line">      com2.compare(<span class="number">3</span>, <span class="number">4</span>);</span><br></pre></td></tr></table></figure>

<p> ③ 类::实例方法</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">BiPredicate&lt;String, String&gt; bp1 = (x, y) -&gt; x.equals(y);</span><br><span class="line">      bp1.test(&quot;a&quot;, &quot;b&quot;);</span><br><span class="line">      BiPredicate&lt;String, String&gt; bp2 = String::equals;</span><br><span class="line">      bp2.test(&quot;a&quot;, &quot;b&quot;);</span><br></pre></td></tr></table></figure>

<h3 id="2-构造器引用"><a href="#2-构造器引用" class="headerlink" title="(2) 构造器引用"></a>(2) 构造器引用</h3><p>格式：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ClassName::New</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Supplier&lt;List&gt; sup1 = () -&gt; <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">      Supplier&lt;List&gt; sup2 = ArrayList::<span class="keyword">new</span>;</span><br></pre></td></tr></table></figure>

<h3 id="3-数组引用"><a href="#3-数组引用" class="headerlink" title="(3) 数组引用"></a>(3) 数组引用</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Function&lt;Integer, String[]&gt; fun1 = count -&gt; <span class="keyword">new</span> <span class="title class_">String</span>[count];</span><br><span class="line">      Function&lt;Integer, String[]&gt; fun2 = String[]::<span class="keyword">new</span>; </span><br></pre></td></tr></table></figure>

<h2 id="5、Stream-API"><a href="#5、Stream-API" class="headerlink" title="5、Stream API"></a>5、Stream API</h2><h3 id="1-什么是Stream"><a href="#1-什么是Stream" class="headerlink" title="(1) 什么是Stream"></a>(1) 什么是Stream</h3><p>流（Stream）是数据渠道，是用于操作数据源（集合、数组等 ）所生成的元素序列。、</p>
<p>简单来说，就是我们对一个包含一个或者多个元素的集合做各种操作。</p>
<p>注意：</p>
<ul>
<li>Stream不会存储元素 。</li>
<li>Stream不会改变源对象，会返回一个持有结果的新的Stream。</li>
<li>Stream的操作是延迟执行的。需要返回结果的时候才会执行。</li>
</ul>
<p>Stream的操作过程如下：</p>
<p>（1）<strong>创建Stream。</strong>一个数据源（如：数组、集合），获取一个流。</p>
<p>（2）<strong>中间操作。</strong>一个中间操作链，对数据源的数据进行处理。</p>
<p>（3）<strong>终止操作（终端操作）</strong>。一个终止操作，执行中间操作链，并产生结果。</p>
<h3 id="2-创建"><a href="#2-创建" class="headerlink" title="(2) 创建"></a>(2) 创建</h3><p>创建流的几种方式如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1、通过集合获取流        </span></span><br><span class="line">ArrayList&lt;Object&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">Stream&lt;Object&gt; s1 = list.stream();</span><br><span class="line"><span class="comment">// 2、通过数组获取流</span></span><br><span class="line">String[] strings = <span class="keyword">new</span> <span class="title class_">String</span>[<span class="number">10</span>];</span><br><span class="line">Stream&lt;String&gt; s2 = Arrays.stream(strings);</span><br><span class="line"><span class="comment">// 3、通过Stream的静态方法获取</span></span><br><span class="line">Stream&lt;Integer&gt; s3 = Stream.of(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line"><span class="comment">// 4、通过迭代获取流</span></span><br><span class="line">Stream&lt;Integer&gt; s4 = Stream.iterate(<span class="number">0</span>, i -&gt; i++);</span><br><span class="line"><span class="comment">// 5、生成流</span></span><br><span class="line">Stream.generate(() -&gt; Math.random())</span><br><span class="line">        .limit(<span class="number">5</span>)</span><br><span class="line">        .forEach(System.out::println);</span><br></pre></td></tr></table></figure>

<h3 id="3-筛选-切片"><a href="#3-筛选-切片" class="headerlink" title="(3) 筛选&#x2F; 切片"></a>(3) 筛选&#x2F; 切片</h3><p>中间操作：</p>
<ul>
<li><code>filter</code>：接收lambda，从流中排除元素。</li>
<li><code>limit</code>：截断流，使其元素不超过给定数量。</li>
<li><code> skip(n)</code>：跳过元素，返回一个舍弃前n个元素的流；若流中元素不足n个，则返回一个空流。</li>
<li><code>distinct</code>：筛选，通过流生成的hashCode()和equals()去除重复元素。</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        List&lt;Person&gt; list = Arrays.asList(</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="number">1</span>, <span class="string">&quot;a&quot;</span>, <span class="number">20</span>),</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="number">2</span>, <span class="string">&quot;b&quot;</span>, <span class="number">21</span>),</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="number">3</span>, <span class="string">&quot;c&quot;</span>, <span class="number">22</span>),</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="number">4</span>, <span class="string">&quot;d&quot;</span>, <span class="number">23</span>),</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="number">5</span>, <span class="string">&quot;e&quot;</span>, <span class="number">24</span>),</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="number">6</span>, <span class="string">&quot;f&quot;</span>, <span class="number">25</span>));</span><br><span class="line">        list.stream()</span><br><span class="line">                .filter(x -&gt; x.getAge() &gt; <span class="number">20</span>)  <span class="comment">// 条件过滤</span></span><br><span class="line">                .limit(<span class="number">3</span>) <span class="comment">// 限制条数</span></span><br><span class="line">                .distinct() <span class="comment">// 去除重复</span></span><br><span class="line">                .skip(<span class="number">1</span>) <span class="comment">// 跳过指定的条数</span></span><br><span class="line">                .forEach(System.out::println); <span class="comment">// 循环打印</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Person</span><span class="params">(<span class="type">int</span> id, String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// getter and setter</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>多个中间操作可以连接起来形成一个流水线，除非流水线上的操作触发终止操作，否则中间操作 不会 执行任何的处理。而在终止操作时一次性全部处理，称为“惰性求值”。</p>
<h3 id="4-映射"><a href="#4-映射" class="headerlink" title="(4) 映射"></a>(4) 映射</h3><ul>
<li><code>map</code>：接收lambda，将元素转换为其他形式或者提取信息；接受一个函数作为参数，该函数会被应用到每个元素上，并将其映射成一个新的元素。</li>
<li><code>flatMap</code>：接收一个函数作为参数，将流中每一个值都转换成另一个流，然后把所有流重新连接成一个流。</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">List&lt;String&gt; list = Arrays.asList(<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>);</span><br><span class="line">     list.stream()</span><br><span class="line">             .map(str -&gt; str.toUpperCase()) </span><br><span class="line">             .forEach(System.out::println);</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        List&lt;String&gt; list = Arrays.asList(<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>);</span><br><span class="line">        list.stream()</span><br><span class="line">                .flatMap(Test::filterCharacter)</span><br><span class="line">                .forEach(System.out::println);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Stream&lt;Character&gt; <span class="title function_">filterCharacter</span><span class="params">(String str)</span> &#123;</span><br><span class="line">        List&lt;Character&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">char</span> c : str.toCharArray()) &#123;</span><br><span class="line">            list.add(c);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> list.stream();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-排序"><a href="#5-排序" class="headerlink" title="(5) 排序"></a>(5) 排序</h3><ul>
<li><code>sorted()</code>：自然排序</li>
<li><code>sorted(Comparator c)</code>：自定义排序</li>
</ul>
<h3 id="6-查找-匹配"><a href="#6-查找-匹配" class="headerlink" title="(6) 查找 &#x2F; 匹配"></a>(6) 查找 &#x2F; 匹配</h3><p>终止操作：</p>
<ul>
<li><code>allMatch</code>：检查是否匹配所有元素</li>
<li><code>anyMatch</code>：检查是否至少匹配一个元素</li>
<li><code>noneMatch</code>：检查是否没有匹配所有元素</li>
<li><code>findFirst</code>：返回第一个元素</li>
<li><code>findAny</code>：返回当前流中的任意元素</li>
<li><code>count</code>：返回流中元素的总个数</li>
<li><code>max</code>：返回流中的最大值</li>
<li><code>min</code>：返回流中的最小值</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Optional;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        List&lt;Status&gt; list = Arrays.asList(Status.FREE, Status.BUSY, Status.VOCATION);</span><br><span class="line">        <span class="comment">// 匹配所有元素</span></span><br><span class="line">        System.out.println(list.stream()</span><br><span class="line">                .allMatch(s -&gt; s.equals(Status.BUSY)));</span><br><span class="line">        <span class="comment">// 至少匹配一个元素</span></span><br><span class="line">        System.out.println(list.stream()</span><br><span class="line">                .anyMatch(s -&gt; s.equals(Status.BUSY)));</span><br><span class="line">        <span class="comment">//  所有元素都不匹配</span></span><br><span class="line">        System.out.println(list.stream()</span><br><span class="line">                .noneMatch(s -&gt; s.equals(Status.BUSY)));</span><br><span class="line">        <span class="comment">//  返回第一个元素</span></span><br><span class="line">        Optional&lt;Status&gt; first = list.stream().findFirst();</span><br><span class="line">        <span class="comment">// 避免空指针异常，如果Optional、为空，则找一个替换的对象</span></span><br><span class="line">        <span class="type">Status</span> <span class="variable">status</span> <span class="operator">=</span> first.orElse(Status.BUSY);</span><br><span class="line">        System.out.println(status);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 返回任意一个元素</span></span><br><span class="line">        Optional&lt;Status&gt; any = list.stream()</span><br><span class="line">                .findAny();</span><br><span class="line">        System.out.println(any);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 返回流中元素的总个数</span></span><br><span class="line">        System.out.println(list.stream()</span><br><span class="line">                .count());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">Status</span> &#123;</span><br><span class="line">    FREE, BUSY, VOCATION;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-归约-收集"><a href="#7-归约-收集" class="headerlink" title="(7) 归约 &#x2F; 收集"></a>(7) 归约 &#x2F; 收集</h3><ul>
<li><code>reduce(T identity, BinaryOperator) / reduce(BinaryOperator)</code>：归约，可以将流中的数据反复结合起来，得到一个值。</li>
<li><code>collect</code>：收集，将流转换成其他形式；接收一个Controller接口实现，用于给流中元素做汇总的方法。</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">List&lt;Integer&gt; list = Arrays.asList(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>);</span><br><span class="line">      System.out.println(list.stream().</span><br><span class="line">              reduce(<span class="number">0</span>, (x, y) -&gt; x + y));		</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">import</span> java.util.stream.Collectors;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        List&lt;Person&gt; persons = Arrays.asList(</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="number">1</span>, <span class="string">&quot;a&quot;</span>, <span class="number">20</span>),</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="number">2</span>, <span class="string">&quot;b&quot;</span>, <span class="number">21</span>),</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="number">3</span>, <span class="string">&quot;c&quot;</span>, <span class="number">22</span>),</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="number">4</span>, <span class="string">&quot;d&quot;</span>, <span class="number">23</span>),</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="number">5</span>, <span class="string">&quot;e&quot;</span>, <span class="number">24</span>),</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="number">6</span>, <span class="string">&quot;f&quot;</span>, <span class="number">25</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 放入list</span></span><br><span class="line">        List&lt;String&gt; list = persons.stream()</span><br><span class="line">                .map(Person::getName)</span><br><span class="line">                .collect(Collectors.toList());</span><br><span class="line">        list.forEach(System.out::println);</span><br><span class="line">        <span class="comment">// 放入set</span></span><br><span class="line">        Set&lt;String&gt; set = persons.stream()</span><br><span class="line">                .map(Person::getName)</span><br><span class="line">                .collect(Collectors.toSet());</span><br><span class="line">        set.forEach(System.out::println);</span><br><span class="line">        <span class="comment">// 放入LinkedHash</span></span><br><span class="line">        LinkedHashSet&lt;String&gt; linkedHashSet = persons.stream()</span><br><span class="line">                .map(Person::getName)</span><br><span class="line">                .collect(Collectors.toCollection(LinkedHashSet::<span class="keyword">new</span>));</span><br><span class="line">        linkedHashSet.forEach(System.out::println);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 总数</span></span><br><span class="line">        System.out.println(persons.stream()</span><br><span class="line">                .collect(Collectors.counting()));</span><br><span class="line">        <span class="comment">// 平均值</span></span><br><span class="line">        System.out.println(persons.stream()</span><br><span class="line">                .collect(Collectors.averagingInt(Person::getAge)));</span><br><span class="line">        <span class="comment">// 总和</span></span><br><span class="line">        System.out.println(persons.stream()</span><br><span class="line">                .collect(Collectors.summingInt(Person::getId)));</span><br><span class="line">        <span class="comment">// 最大值</span></span><br><span class="line">        System.out.println(persons.stream()</span><br><span class="line">                .collect(Collectors.maxBy((a, b) -&gt; Integer.compare(a.getAge(), b.getAge()))));</span><br><span class="line">        <span class="comment">// 最小值</span></span><br><span class="line">        System.out.println(persons.stream()</span><br><span class="line">                .collect(Collectors.minBy((a, b) -&gt; Integer.compare(a.getAge(), b.getAge()))));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 分组</span></span><br><span class="line">        Map&lt;Integer, List&lt;Person&gt;&gt; map = persons.stream()</span><br><span class="line">                .collect(Collectors.groupingBy(Person::getId));</span><br><span class="line">        System.out.println(map);</span><br><span class="line">        <span class="comment">// 多级分组</span></span><br><span class="line">        Map&lt;Integer, Map&lt;String, List&lt;Person&gt;&gt;&gt; mapMap = persons.stream()</span><br><span class="line">                .collect(Collectors.groupingBy(Person::getId, Collectors.groupingBy(e -&gt; &#123;</span><br><span class="line">                    <span class="keyword">if</span> (e.getAge() &gt; <span class="number">20</span>) &#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="string">&quot;符合条件&quot;</span>;</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="string">&quot;不符合条件&quot;</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)));</span><br><span class="line">        System.out.println(mapMap);</span><br><span class="line">        <span class="comment">// 分区</span></span><br><span class="line">        Map&lt;Boolean, List&lt;Person&gt;&gt; listMap = persons.stream()</span><br><span class="line">                .collect(Collectors.partitioningBy(e -&gt; e.getAge() &gt; <span class="number">21</span>));</span><br><span class="line">        System.out.println(listMap);</span><br><span class="line">    </span><br><span class="line">        <span class="comment">// 总结</span></span><br><span class="line">        <span class="type">IntSummaryStatistics</span> <span class="variable">collect</span> <span class="operator">=</span> persons.stream()</span><br><span class="line">                .collect(Collectors.summarizingInt(Person::getAge));</span><br><span class="line">        System.out.println(collect.getMax());</span><br><span class="line">        System.out.println(collect.getMin());</span><br><span class="line">        System.out.println(collect.getSum());</span><br><span class="line">        System.out.println(collect.getAverage());</span><br><span class="line">        System.out.println(collect.getCount());</span><br><span class="line">        <span class="comment">// 连接</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">connect</span> <span class="operator">=</span> persons.stream()</span><br><span class="line">                .map(Person::getName)</span><br><span class="line">                .collect(Collectors.joining(<span class="string">&quot;-&quot;</span>));</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Person</span><span class="params">(<span class="type">int</span> id, String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// getter and setter</span></span><br><span class="line">    <span class="comment">// toString</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="8-并行流"><a href="#8-并行流" class="headerlink" title="(8) 并行流"></a>(8) 并行流</h3><p>并行流：就是把一个内容分成几个数据块，并用不同的线程分别处理每个数据块的流。</p>
<p>Java8中将并行流进行了优化，我们可以很容易的对数据进行操作；Stream API可以声明性地通过parallel()与sequential()在并行流与串行流之间切换。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 串行流（单线程）：切换为并行流parallel()</span></span><br><span class="line"><span class="comment">// 并行流（多线程）：切换为串行流sequential()</span></span><br><span class="line">LongStream.rangeClosed(<span class="number">0</span>, <span class="number">10000000L</span>)</span><br><span class="line">                .parallel() <span class="comment">// 底层使用的是Fork/Join框架</span></span><br><span class="line">                .reduce(<span class="number">0</span>, Long::sum);</span><br></pre></td></tr></table></figure>

<h2 id="6、Optional"><a href="#6、Optional" class="headerlink" title="6、Optional"></a>6、Optional</h2><p>Optional类是一个容器类，代表一个值存在或者不存在，原来使用null表示一个值不存在，现在可以用Optional可以更好的表达这个概念，并且可以避免空指针异常。</p>
<p>常用方法：</p>
<ul>
<li><code>Optional.of(T t)</code>：创建一个Optional实例。</li>
<li><code>Optional&#39;empty(T t)</code>：创建一个空的Optional实例。</li>
<li><code>OpTional.OfNullable(T t)</code>：若t不为null，则创建Optional实例，否则空实例。</li>
<li><code>isPresent()</code>：判断是否包含某值。</li>
<li><code>orElse(T t)</code>：如果调用对象包含值，返回该值，否则返回t。</li>
<li><code>orElseGet(Supplier s)</code>：如果调用对象包含值，返回该值，否则返回s获取的值。</li>
<li><code>map(Function f)</code>：如果有值对其处理，并返回处理后的Optional，否则返回Optional.empty()。</li>
<li><code>flatmap(Function mapper)</code>：与map相似，要求返回值必须是Optional。</li>
</ul>
<h2 id="7、新时间日期API"><a href="#7、新时间日期API" class="headerlink" title="7、新时间日期API"></a>7、新时间日期API</h2><h3 id="1-安全问题"><a href="#1-安全问题" class="headerlink" title="(1) 安全问题"></a>(1) 安全问题</h3><p>Java之前的Date时间类，存在很多的缺点 。</p>
<p>（1）最开始的时候，Date既要承载日期信息，又要做日期之间的转换，还要做不同日期格式的显示，职责较繁杂，从JDK1.1开始，这三项职责分开了：</p>
<ul>
<li>使用<code>Calendar</code>类实现日期和时间字段之间转换</li>
<li>使用<code>DateFormat</code>类来格式化和分析日期字符串</li>
<li>而<code>Date</code>只用来承载日期和时间信息</li>
</ul>
<p>（2）对year和month的表达。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Date</span> <span class="variable">date</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="number">2012</span>,<span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line">System.out.println(date);</span><br><span class="line"><span class="comment">//输出Thu Feb 01 00:00:00 CST 3912</span></span><br></pre></td></tr></table></figure>

<p>观察输出结果，year是2012 + 1900，而month是 1+1，如果要设置日期，我们应该使用<code>java.util.Calendar</code>，如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Calendar</span> <span class="variable">calendar</span> <span class="operator">=</span> Calendar.getInstance();</span><br><span class="line">      calendar.set(<span class="number">2013</span>, <span class="number">8</span>, <span class="number">2</span>);</span><br><span class="line">      <span class="comment">// 输出 Mon Sep 02 17:11:58 CST 2013</span></span><br><span class="line">      System.out.println(calendar.getTime());</span><br><span class="line">      calendar.set(<span class="number">2013</span>, Calendar.AUGUST, <span class="number">2</span>);</span><br><span class="line">      <span class="comment">// 输出 Fri Aug 02 17:13:53 CST 2013</span></span><br><span class="line">      System.out.println(calendar.getTime());</span><br></pre></td></tr></table></figure>

<p>不过这样，month的表示还是从0开始的，除非我们直接使用枚举类型表示月份。</p>
<p>（3）<code>java.util.Date</code> 和 <code>java.util.Calendar</code>中的所有属性都是可变的。</p>
<p>（4）<code>SimpleDateTimeFormat</code>是非线程安全的。</p>
<p>基于上述问题，在 Java 8 对日期进行了优化，首先是将日期和时间设计为不可变类型，就像String类型一样，这样就避免了多线程下对日期的修改导致的线程安全问题，每次对日期的操作都会生成一个新的日期对象；另外还把功能进一步细化了，对日期的运算更加便利，输出也更加人性化。</p>
<h3 id="2-本地时间-日期"><a href="#2-本地时间-日期" class="headerlink" title="(2) 本地时间 &#x2F; 日期"></a>(2) 本地时间 &#x2F; 日期</h3><p>LocalDate、LocalTime、 LocalDateTime类的实例是不可变的对象，分别表示使用ISO-8601日历系统的日期、时间、日期和时间。它们提供了简单的日期或时间，并不包含当前的时间信息。也不包含与时区相关的信息。</p>
<p>常用方法：</p>
<table>
<thead>
<tr>
<th align="center">方法名</th>
<th align="center">返回值类型</th>
<th align="center">解释</th>
</tr>
</thead>
<tbody><tr>
<td align="center">now()</td>
<td align="center">static ，LocalDate Time</td>
<td align="center">从默认时区的系统时钟获取当前日期</td>
</tr>
<tr>
<td align="center">of(int year, int month, int dayOfMonth, int hour, int minute, int second)</td>
<td align="center">static，LocalDateTime</td>
<td align="center">从年月日时分秒获得LocalDATe Time的实例，将纳秒设置为零</td>
</tr>
<tr>
<td align="center">plus(long amountToAdd, TemporalUnit unit)</td>
<td align="center">LocalDateTime</td>
<td align="center">返回此日期时间的副本，并添加指定的数量</td>
</tr>
<tr>
<td align="center">get(TemporaField field)</td>
<td align="center">int</td>
<td align="center">从此日期时间获取指定字段的值为int</td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 获取当前时间</span></span><br><span class="line">     System.out.println(LocalDateTime.now());</span><br><span class="line">     <span class="comment">// 获取指定时间</span></span><br><span class="line">     <span class="type">LocalDateTime</span> <span class="variable">of</span> <span class="operator">=</span> LocalDateTime.of(<span class="number">2023</span>, <span class="number">3</span>, <span class="number">27</span>, <span class="number">17</span>, <span class="number">30</span>, <span class="number">18</span>);</span><br><span class="line">     System.out.println(of);</span><br><span class="line">     <span class="comment">// 加 plus</span></span><br><span class="line">     System.out.println(of.plusMonths(<span class="number">1</span>));</span><br><span class="line">     <span class="comment">// 减 minus</span></span><br><span class="line">     System.out.println(of.minusMonths(<span class="number">3</span>));</span><br><span class="line">     <span class="comment">// 获取指定给的年月日时分秒</span></span><br><span class="line">     System.out.println(of.getDayOfMonth());</span><br><span class="line">     System.out.println(of.getHour());</span><br></pre></td></tr></table></figure>

<h3 id="3-时间戳"><a href="#3-时间戳" class="headerlink" title="(3) 时间戳"></a>(3) 时间戳</h3><p>时间戳是以Unix元年1970-01-01 00:00:00到某个时间之间的毫秒数。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 默认获取UTC时区(UTC:世界协调时间)</span></span><br><span class="line">      <span class="type">Instant</span> <span class="variable">now</span> <span class="operator">=</span> Instant.now();</span><br><span class="line">      System.out.println(now);</span><br><span class="line">      <span class="comment">// 带偏移量的时间日期(如: UTC + 8)</span></span><br><span class="line">      System.out.println(now.atOffset(ZoneOffset.ofHours(<span class="number">1</span>)));</span><br><span class="line">      <span class="comment">// 转换成对应的毫秒值</span></span><br><span class="line">      System.out.println(now.toEpochMilli());</span><br><span class="line">      <span class="comment">// 构建时间戳</span></span><br><span class="line">      System.out.println(Instant.ofEpochSecond(<span class="number">60</span>));</span><br></pre></td></tr></table></figure>

<h3 id="4-时间-日期差"><a href="#4-时间-日期差" class="headerlink" title="(4) 时间&#x2F;日期差"></a>(4) 时间&#x2F;日期差</h3><ul>
<li><code>Duration</code>：计算两个时间之间的间隔</li>
<li><code>Period</code>：计算两个日期之间的间隔</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Instant</span> <span class="variable">ins1</span> <span class="operator">=</span> Instant.now();</span><br><span class="line">      <span class="type">Instant</span> <span class="variable">ins2</span> <span class="operator">=</span> Instant.now();</span><br><span class="line">      <span class="type">Duration</span> <span class="variable">d</span> <span class="operator">=</span> Duration.between(ins1, ins2);</span><br><span class="line">      System.out.println(d.getSeconds()); <span class="comment">// 秒</span></span><br><span class="line">      System.out.println(d.getUnits()); <span class="comment">// 时间戳</span></span><br><span class="line"></span><br><span class="line">      <span class="type">LocalDate</span> <span class="variable">ld1</span> <span class="operator">=</span> LocalDate.of(<span class="number">2023</span>, <span class="number">9</span>, <span class="number">1</span>);</span><br><span class="line">      <span class="type">LocalDate</span> <span class="variable">ld2</span> <span class="operator">=</span> LocalDate.now();</span><br><span class="line">      <span class="type">Period</span> <span class="variable">p</span> <span class="operator">=</span> Period.between(ld2, ld1);</span><br><span class="line">      System.out.println(p.getYears()); <span class="comment">// 年</span></span><br><span class="line">      System.out.println(p.toTotalMonths()); <span class="comment">// 月</span></span><br></pre></td></tr></table></figure>

<h3 id="5-时间校正器"><a href="#5-时间校正器" class="headerlink" title="(5) 时间校正器"></a>(5) 时间校正器</h3><ul>
<li><code>TemporalAdjuster</code>：时间校正器。有时我们可能需要获取例如：将日期调整到下个周日等操作。</li>
<li><code>TemporalAdjusters</code>：该类通过静态方法提供了大量的常用 TemporalAdjuster的实现</li>
</ul>
<p>例如：获取下个周日</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">LocalDate</span> <span class="variable">nextSunday</span> <span class="operator">=</span> LocalDate.now().with(</span><br><span class="line">		TemporaAdjusters.next(DayOfWeek.SUNDAY)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>一些时间校正器的使用如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">LocalDateTime</span> <span class="variable">t1</span> <span class="operator">=</span> LocalDateTime.now();</span><br><span class="line">     System.out.println(t1);</span><br><span class="line">     <span class="comment">// 指定日期时间中的年月日</span></span><br><span class="line">     <span class="type">LocalDateTime</span> <span class="variable">t2</span> <span class="operator">=</span> t1.withDayOfMonth(<span class="number">10</span>);</span><br><span class="line">     System.out.println(t2);</span><br><span class="line">     <span class="comment">// 指定时间校正器</span></span><br><span class="line">     <span class="type">LocalDateTime</span> <span class="variable">t3</span> <span class="operator">=</span> t1.with(TemporalAdjusters.next(DayOfWeek.SUNDAY));</span><br><span class="line">     System.out.println(t3);</span><br><span class="line">     <span class="comment">// 自定义时间矫正器</span></span><br><span class="line">     <span class="type">LocalDateTime</span> <span class="variable">t5</span> <span class="operator">=</span> t1.with(ta -&gt; &#123;</span><br><span class="line">         <span class="type">LocalDateTime</span> <span class="variable">t4</span> <span class="operator">=</span> (LocalDateTime) ta;</span><br><span class="line">         <span class="type">DayOfWeek</span> <span class="variable">dow</span> <span class="operator">=</span> t4.getDayOfWeek();</span><br><span class="line">         <span class="keyword">if</span> (dow.equals(DayOfWeek.MONDAY)) &#123;</span><br><span class="line">             <span class="keyword">return</span> t4.plusDays(<span class="number">6</span>);</span><br><span class="line">         &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">             <span class="comment">// 其他时间逻辑...</span></span><br><span class="line">             <span class="keyword">return</span> t4;</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;);</span><br><span class="line">     System.out.println(t5);</span><br></pre></td></tr></table></figure>

<h3 id="6-时间格式化"><a href="#6-时间格式化" class="headerlink" title="(6) 时间格式化"></a>(6) 时间格式化</h3><ul>
<li><code>DateTimeFormatter</code>：格式化日期或时间</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//默认格式化</span></span><br><span class="line">      <span class="type">DateTimeFormatter</span> <span class="variable">dtf1</span> <span class="operator">=</span> DateTimeFormatter.ISO_DATE_TIME;</span><br><span class="line">      <span class="type">LocalDateTime</span> <span class="variable">ldt1</span> <span class="operator">=</span> LocalDateTime.now();</span><br><span class="line">      <span class="type">String</span> <span class="variable">str1</span> <span class="operator">=</span> ldt1.format(dtf1);</span><br><span class="line">      System.out.println(str1);</span><br><span class="line"></span><br><span class="line">      <span class="comment">//自定义格式化 ofPattern</span></span><br><span class="line">      <span class="type">DateTimeFormatter</span> <span class="variable">dtf2</span> <span class="operator">=</span> DateTimeFormatter.ofPattern(<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);</span><br><span class="line">      <span class="type">LocalDateTime</span> <span class="variable">ldt2</span> <span class="operator">=</span> LocalDateTime.now();</span><br><span class="line">      <span class="type">String</span> <span class="variable">str2</span> <span class="operator">=</span> ldt2.format(dtf2);</span><br><span class="line">      System.out.println(str2);</span><br><span class="line"></span><br><span class="line">      <span class="comment">//解析</span></span><br><span class="line">      <span class="type">LocalDateTime</span> <span class="variable">newDate</span> <span class="operator">=</span> LocalDateTime.parse(str1, dtf1);</span><br><span class="line">      System.out.println(newDate);</span><br></pre></td></tr></table></figure>

<h3 id="7-时区"><a href="#7-时区" class="headerlink" title="(7) 时区"></a>(7) 时区</h3><ul>
<li><code>ZonedDate</code></li>
<li><code>ZonedTime</code></li>
<li><code>ZonedDateTime</code></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//查看支持的时区</span></span><br><span class="line">      Set&lt;String&gt; set = ZoneId.getAvailableZoneIds();</span><br><span class="line">      set.forEach(System.out::println);</span><br><span class="line"></span><br><span class="line">      <span class="comment">//指定时区</span></span><br><span class="line">      <span class="type">LocalDateTime</span> <span class="variable">ldt1</span> <span class="operator">=</span> LocalDateTime.now(ZoneId.of(<span class="string">&quot;Europe/Tallinn&quot;</span>));</span><br><span class="line">      System.out.println(ldt1);</span><br><span class="line"></span><br><span class="line">      <span class="comment">//在已构建好的日期时间上指定时区</span></span><br><span class="line">      <span class="type">LocalDateTime</span> <span class="variable">ldt2</span> <span class="operator">=</span> LocalDateTime.now(ZoneId.of(<span class="string">&quot;Europe/Tallinn&quot;</span>));</span><br><span class="line">      <span class="type">ZonedDateTime</span> <span class="variable">zdt1</span> <span class="operator">=</span> ldt2.atZone(ZoneId.of(<span class="string">&quot;Europe/Tallinn&quot;</span>));</span><br><span class="line">      System.out.println(zdt1);</span><br></pre></td></tr></table></figure>

<h2 id="8、Annotations注解"><a href="#8、Annotations注解" class="headerlink" title="8、Annotations注解"></a>8、Annotations注解</h2><p>在Java8中，对注解的改进主要有两点：类型注解和重复注解。</p>
<h3 id="1-类型注解"><a href="#1-类型注解" class="headerlink" title="(1) 类型注解"></a>(1) 类型注解</h3><p>新增<code>ElementType.TYPE_USE</code> 和<code>ElementType.TYPE_PARAMETER</code>（在Target上）</p>
<p> 新增的两个注释的程序元素类型 <code>ElementType.TYPE_USE</code> 和 <code>ElementType.TYPE_PARAMETER</code> 用来描述注解的新场合 。<br><code>ElementType.TYPE_PARAMETER</code> 表示该注解能写在类型变量的声明语句中。<br><code>ElementType.TYPE_USE </code>表示该注解能写在使用类型的任何语句中（eg：声明语句、泛型和强制转换语句中的类型）。</p>
<p>类型注解的作用：</p>
<p>类型注解被用来支持在Java的程序中做强类型检查。配合第三方插件工具Checker Framework（注：此插件so easy,这里不介绍了），可以在编译的时候检测出runtime error（eg：UnsupportedOperationException； NumberFormatException；NullPointerException异常等都是runtime error），以提高代码质量。这就是类型注解的作用。</p>
<p>Note：</p>
<p>使用Checker Framework可以找到类型注解出现的地方并检查。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> checkers.nullness.quals.*;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestDemo</span>&#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">sample</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="meta">@NonNull</span> <span class="type">Object</span> <span class="variable">my</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>编译上面的类，上面编译是通过的，但若修改代码：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">@NonNull Object my = null;</span><br></pre></td></tr></table></figure>

<p>但若不想使用类型注解检测出来错误，则不需要processor，正常javac TestDemo.java是可以通过编译的，但是运行时会报 NullPointerException 异常。</p>
<p>为了能在编译期间就自动检查出这类异常，可以通过类型注解结合 Checker Framework 提前排查出来错误异常。</p>
<p>注意java 5,6,7版本是不支持注解@NonNull，但checker framework 有个向下兼容的解决方案，就是将类型注解@NonNull 用&#x2F;**&#x2F;注释起来。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> checkers.nullness.quals.*;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestDemo</span>&#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">sample</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">/*@NonNull*/</span> <span class="type">Object</span> <span class="variable">my</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这样javac编译器就会忽略掉注释块，但用checker framework里面的javac编译器同样能够检测出@NonNull错误。<br>通过 <strong>类型注解 + checker framework</strong> 可以在编译时就找到runtime error。</p>
<h3 id="2-重复注解"><a href="#2-重复注解" class="headerlink" title="(2) 重复注解"></a>(2) 重复注解</h3><p>允许在同一声明类型（类，属性，或方法）上多次使用同一个注解。</p>
<p>Java8以前的版本使用注解有一个限制是相同的注解在同一位置只能使用一次，不能使用多次。Java 8 引入了重复注解机制，这样相同的注解可以在同一地方使用多次。重复注解机制本身必须用 @Repeatable 注解。</p>
<p>实际上，重复注解不是一个语言上的改变，只是编译器层面的改动，技术层面仍然是一样的。</p>
<p>（1）定义一个注解：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Repeatable(MyAnnotations.class)</span></span><br><span class="line"><span class="comment">// TYPE_PARAMETER 类型参数</span></span><br><span class="line"><span class="meta">@Target(&#123;TYPE, FIELD, METHOD, PARAMETER, CONSTRUCTOR, LOCAL_VARIABLE, TYPE_PARAMETER&#125;)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> MyAnnotation &#123;</span><br><span class="line"></span><br><span class="line">    String <span class="title function_">value</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;java&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>（2）定义一个注解容器</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Target(&#123;TYPE, FIELD, METHOD, PARAMETER, CONSTRUCTOR, LOCAL_VARIABLE&#125;)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> MyAnnotations &#123;</span><br><span class="line">    MyAnnotation[] value();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>（3）使用</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@MyAnnotation(&quot;hello&quot;)</span></span><br><span class="line">   <span class="meta">@MyAnnotation(&quot;java&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">show</span><span class="params">(<span class="meta">@MyAnnotation(&quot;abc&quot;)</span> String str)</span> &#123;</span><br><span class="line">       System.out.println(str);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" title="头像" alt="头像"></a><div class="post-copyright__author_name">小奥</div><div class="post-copyright__author_desc">浮生若梦 为欢几何</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="http://example.com/2024/01/22/Java8%E6%96%B0%E7%89%B9%E6%80%A7%E4%B8%80%E8%A7%88/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('http://example.com/2024/01/22/Java8%E6%96%B0%E7%89%B9%E6%80%A7%E4%B8%80%E8%A7%88/')">Java8新特性一览</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="http://example.com/2024/01/22/Java8%E6%96%B0%E7%89%B9%E6%80%A7%E4%B8%80%E8%A7%88/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=Java8新特性一览&amp;url=http://example.com/2024/01/22/Java8%E6%96%B0%E7%89%B9%E6%80%A7%E4%B8%80%E8%A7%88/&amp;pic=/img/png/19.png" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">小奥</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__category-list"><a class="post-meta__box__categoryes" href="/categories/Java/"><span class="categoryes-punctuation"> <i class="anzhiyufont anzhiyu-icon-inbox"></i></span>Java<span class="categoryesPageCount">16</span></a></div><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/JDK8/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>JDK8<span class="tagsPageCount">1</span></a></div></div><div class="post_share"><div class="social-share" data-image="/img/png/2.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/01/22/Java%E5%B9%B6%E5%8F%91%E4%B9%8B%E5%8E%9F%E5%AD%90%E7%B1%BB%E6%BA%90%E7%A0%81%E7%AF%87/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/png/1.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Java并发之原子类型源码篇</div></div></a></div><div class="next-post pull-right"><a href="/2024/01/22/Java%E4%B9%8BBigDecimal%E4%BD%BF%E7%94%A8%E6%AD%A3%E7%A1%AE%E5%A7%BF%E5%8A%BF/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/default_cover.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Java之BigDecimal使用正确姿势</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-status"><img class="g-status" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/24/64e6ce9c507bb.png" alt="status"/></div></div><div class="author-info__description"><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">这有关于<b style="color:#fff">Java、数据库、中间件</b>相关的学习笔记，还有<b style="color:#fff">面试题总结</b>和<b style="color:#fff">分享</b>。</div><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">相信你可以在这里找到对你有用的<b style="color:#fff">知识</b>和<b style="color:#fff">教程</b>。</div></div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/"><h1 class="author-info__name">小奥</h1><div class="author-info__desc">浮生若梦 为欢几何</div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/xiaoaozz" target="_blank" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#JDK8"><span class="toc-number">1.</span> <span class="toc-text">JDK8</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E6%8E%A5%E5%8F%A3"><span class="toc-number">1.1.</span> <span class="toc-text">1、接口</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81Lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">1.2.</span> <span class="toc-text">2、Lambda表达式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81%E5%87%BD%E6%95%B0%E5%BC%8F%E6%8E%A5%E5%8F%A3"><span class="toc-number">1.3.</span> <span class="toc-text">3、函数式接口</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%81%E5%BC%95%E7%94%A8"><span class="toc-number">1.4.</span> <span class="toc-text">4、引用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%96%B9%E6%B3%95%E5%BC%95%E7%94%A8"><span class="toc-number">1.4.1.</span> <span class="toc-text">(1) 方法引用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%9E%84%E9%80%A0%E5%99%A8%E5%BC%95%E7%94%A8"><span class="toc-number">1.4.2.</span> <span class="toc-text">(2) 构造器引用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%95%B0%E7%BB%84%E5%BC%95%E7%94%A8"><span class="toc-number">1.4.3.</span> <span class="toc-text">(3) 数组引用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5%E3%80%81Stream-API"><span class="toc-number">1.5.</span> <span class="toc-text">5、Stream API</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%BB%80%E4%B9%88%E6%98%AFStream"><span class="toc-number">1.5.1.</span> <span class="toc-text">(1) 什么是Stream</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%88%9B%E5%BB%BA"><span class="toc-number">1.5.2.</span> <span class="toc-text">(2) 创建</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E7%AD%9B%E9%80%89-%E5%88%87%E7%89%87"><span class="toc-number">1.5.3.</span> <span class="toc-text">(3) 筛选&#x2F; 切片</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E6%98%A0%E5%B0%84"><span class="toc-number">1.5.4.</span> <span class="toc-text">(4) 映射</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E6%8E%92%E5%BA%8F"><span class="toc-number">1.5.5.</span> <span class="toc-text">(5) 排序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E6%9F%A5%E6%89%BE-%E5%8C%B9%E9%85%8D"><span class="toc-number">1.5.6.</span> <span class="toc-text">(6) 查找 &#x2F; 匹配</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E5%BD%92%E7%BA%A6-%E6%94%B6%E9%9B%86"><span class="toc-number">1.5.7.</span> <span class="toc-text">(7) 归约 &#x2F; 收集</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-%E5%B9%B6%E8%A1%8C%E6%B5%81"><span class="toc-number">1.5.8.</span> <span class="toc-text">(8) 并行流</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6%E3%80%81Optional"><span class="toc-number">1.6.</span> <span class="toc-text">6、Optional</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7%E3%80%81%E6%96%B0%E6%97%B6%E9%97%B4%E6%97%A5%E6%9C%9FAPI"><span class="toc-number">1.7.</span> <span class="toc-text">7、新时间日期API</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%AE%89%E5%85%A8%E9%97%AE%E9%A2%98"><span class="toc-number">1.7.1.</span> <span class="toc-text">(1) 安全问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%9C%AC%E5%9C%B0%E6%97%B6%E9%97%B4-%E6%97%A5%E6%9C%9F"><span class="toc-number">1.7.2.</span> <span class="toc-text">(2) 本地时间 &#x2F; 日期</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%97%B6%E9%97%B4%E6%88%B3"><span class="toc-number">1.7.3.</span> <span class="toc-text">(3) 时间戳</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E6%97%B6%E9%97%B4-%E6%97%A5%E6%9C%9F%E5%B7%AE"><span class="toc-number">1.7.4.</span> <span class="toc-text">(4) 时间&#x2F;日期差</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E6%97%B6%E9%97%B4%E6%A0%A1%E6%AD%A3%E5%99%A8"><span class="toc-number">1.7.5.</span> <span class="toc-text">(5) 时间校正器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E6%97%B6%E9%97%B4%E6%A0%BC%E5%BC%8F%E5%8C%96"><span class="toc-number">1.7.6.</span> <span class="toc-text">(6) 时间格式化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E6%97%B6%E5%8C%BA"><span class="toc-number">1.7.7.</span> <span class="toc-text">(7) 时区</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8%E3%80%81Annotations%E6%B3%A8%E8%A7%A3"><span class="toc-number">1.8.</span> <span class="toc-text">8、Annotations注解</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%B1%BB%E5%9E%8B%E6%B3%A8%E8%A7%A3"><span class="toc-number">1.8.1.</span> <span class="toc-text">(1) 类型注解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E9%87%8D%E5%A4%8D%E6%B3%A8%E8%A7%A3"><span class="toc-number">1.8.2.</span> <span class="toc-text">(2) 重复注解</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/03/25/MySQL%E4%B9%8BACID%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86/" title="MySQL之ACID实现原理"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/png/2.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MySQL之ACID实现原理"/></a><div class="content"><a class="title" href="/2024/03/25/MySQL%E4%B9%8BACID%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86/" title="MySQL之ACID实现原理">MySQL之ACID实现原理</a><time datetime="2024-03-25T07:52:05.000Z" title="发表于 2024-03-25 15:52:05">2024-03-25</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/03/24/Spring%E4%B9%8B%E4%BA%8B%E5%8A%A1%E5%8E%9F%E7%90%86%E7%AF%87/" title="Spring之事务原理篇"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/png/15.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Spring之事务原理篇"/></a><div class="content"><a class="title" href="/2024/03/24/Spring%E4%B9%8B%E4%BA%8B%E5%8A%A1%E5%8E%9F%E7%90%86%E7%AF%87/" title="Spring之事务原理篇">Spring之事务原理篇</a><time datetime="2024-03-24T09:54:42.000Z" title="发表于 2024-03-24 17:54:42">2024-03-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/03/15/Spring%E4%B9%8B%E5%A6%82%E4%BD%95%E9%80%89%E6%8B%A9%E4%BA%8B%E5%8A%A1/" title="Spring之如何选择事务"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/png/14.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Spring之如何选择事务"/></a><div class="content"><a class="title" href="/2024/03/15/Spring%E4%B9%8B%E5%A6%82%E4%BD%95%E9%80%89%E6%8B%A9%E4%BA%8B%E5%8A%A1/" title="Spring之如何选择事务">Spring之如何选择事务</a><time datetime="2024-03-15T11:31:48.000Z" title="发表于 2024-03-15 19:31:48">2024-03-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/03/09/JVM%E4%B9%8B%E8%AE%A4%E8%AF%86%E5%92%8C%E8%A7%A3%E5%86%B3Full-GC/" title="JVM之认识和解决Full GC"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/png/17.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JVM之认识和解决Full GC"/></a><div class="content"><a class="title" href="/2024/03/09/JVM%E4%B9%8B%E8%AE%A4%E8%AF%86%E5%92%8C%E8%A7%A3%E5%86%B3Full-GC/" title="JVM之认识和解决Full GC">JVM之认识和解决Full GC</a><time datetime="2024-03-09T12:33:59.000Z" title="发表于 2024-03-09 20:33:59">2024-03-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/02/28/Java%E5%B9%B6%E5%8F%91%E4%B9%8B%E7%BA%BF%E7%A8%8B%E6%B1%A0%E8%AF%A6%E8%A7%A3/" title="Java并发之线程池详解"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/png/13.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Java并发之线程池详解"/></a><div class="content"><a class="title" href="/2024/02/28/Java%E5%B9%B6%E5%8F%91%E4%B9%8B%E7%BA%BF%E7%A8%8B%E6%B1%A0%E8%AF%A6%E8%A7%A3/" title="Java并发之线程池详解">Java并发之线程池详解</a><time datetime="2024-02-28T11:18:05.000Z" title="发表于 2024-02-28 19:18:05">2024-02-28</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2020 - 2024 By <a class="footer-bar-link" href="/" title="小奥" target="_blank">小奥</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">40</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">35</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">13</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://xiaoaozz.github.io/" title="个人博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="个人博客"/><span class="back-menu-item-text">个人博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://github.com/xiaoaozz" title="Github"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://avatars.githubusercontent.com/u/104616274?v=4" alt="Github"/><span class="back-menu-item-text">Github</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/AQS/" style="font-size: 0.88rem;">AQS<sup>1</sup></a><a href="/tags/ArrayList/" style="font-size: 0.88rem;">ArrayList<sup>1</sup></a><a href="/tags/BigDecimal/" style="font-size: 0.88rem;">BigDecimal<sup>1</sup></a><a href="/tags/Feed%E6%B5%81/" style="font-size: 0.88rem;">Feed流<sup>1</sup></a><a href="/tags/Full-GC/" style="font-size: 0.88rem;">Full GC<sup>1</sup></a><a href="/tags/Go%E9%9D%A2%E7%BB%8F/" style="font-size: 0.88rem;">Go面经<sup>1</sup></a><a href="/tags/HashMap/" style="font-size: 0.88rem;">HashMap<sup>1</sup></a><a href="/tags/JDK8/" style="font-size: 0.88rem;">JDK8<sup>1</sup></a><a href="/tags/Java%E9%9D%A2%E7%BB%8F/" style="font-size: 0.88rem;">Java面经<sup>1</sup></a><a href="/tags/LinkedList/" style="font-size: 0.88rem;">LinkedList<sup>1</sup></a><a href="/tags/MySQL%E4%BC%98%E5%8C%96/" style="font-size: 0.88rem;">MySQL优化<sup>2</sup></a><a href="/tags/MySQL%E5%BA%94%E7%94%A8/" style="font-size: 0.88rem;">MySQL应用<sup>1</sup></a><a href="/tags/MySQL%E9%9D%A2%E7%BB%8F/" style="font-size: 0.88rem;">MySQL面经<sup>1</sup></a><a href="/tags/OOM/" style="font-size: 0.88rem;">OOM<sup>1</sup></a><a href="/tags/RabbitMQ/" style="font-size: 0.88rem;">RabbitMQ<sup>1</sup></a><a href="/tags/Redission%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81/" style="font-size: 0.88rem;">Redission分布式锁<sup>1</sup></a><a href="/tags/Redis%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81/" style="font-size: 0.88rem;">Redis分布式锁<sup>1</sup></a><a href="/tags/ReentrantLock/" style="font-size: 0.88rem;">ReentrantLock<sup>1</sup></a><a href="/tags/SQL%E4%BC%98%E5%8C%96/" style="font-size: 0.88rem;">SQL优化<sup>2</sup></a><a href="/tags/Servlet/" style="font-size: 0.88rem;">Servlet<sup>1</sup></a><a href="/tags/Socket/" style="font-size: 0.88rem;">Socket<sup>2</sup></a><a href="/tags/SpringCloud/" style="font-size: 0.88rem;">SpringCloud<sup>1</sup></a><a href="/tags/StopWatch/" style="font-size: 0.88rem;">StopWatch<sup>1</sup></a><a href="/tags/synchronized/" style="font-size: 0.88rem;">synchronized<sup>1</sup></a><a href="/tags/%E4%BA%8B%E5%8A%A1/" style="font-size: 0.88rem;">事务<sup>3</sup></a><a href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/" style="font-size: 0.88rem;">分布式事务<sup>1</sup></a><a href="/tags/%E5%B9%B6%E5%8F%91/" style="font-size: 0.88rem;">并发<sup>2</sup></a><a href="/tags/%E6%8E%A5%E5%8F%A3%E9%99%90%E6%B5%81/" style="font-size: 0.88rem;">接口限流<sup>1</sup></a><a href="/tags/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/" style="font-size: 0.88rem;">文件上传<sup>1</sup></a><a href="/tags/%E6%AD%BB%E9%94%81/" style="font-size: 0.88rem;">死锁<sup>1</sup></a><a href="/tags/%E7%AE%97%E6%B3%95%E6%A8%A1%E6%9D%BF/" style="font-size: 0.88rem;">算法模板<sup>1</sup></a><a href="/tags/%E7%BA%BF%E7%A8%8B/" style="font-size: 0.88rem;">线程<sup>1</sup></a><a href="/tags/%E7%BA%BF%E7%A8%8B%E6%B1%A0/" style="font-size: 0.88rem;">线程池<sup>1</sup></a><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E9%9D%A2%E7%BB%8F/" style="font-size: 0.88rem;">计算机网络面经<sup>1</sup></a><a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size: 0.88rem;">设计模式<sup>1</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8956954060&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("04/01/2021 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2020 By 安知鱼 V1.6.12",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 小奥 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><div class="js-pjax"><input type="hidden" name="page-type" id="page-type" value="post"></div><script>var visitorMail = "";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><script src="/js/anzhiyu/right_click_menu.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>